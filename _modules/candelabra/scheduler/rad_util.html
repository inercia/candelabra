

  
  
 
  
 


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>candelabra.scheduler.rad_util &mdash; candelabra 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.0.0/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="candelabra 1.0 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../doc_index.html">Candelabra</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://github.com/inercia/candelabra">Github</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a href="../../../doc_index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="simple">
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_install.html">Software installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_install.html#build-requirements">Build Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_install.html#development">Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_install.html#on-mac-os-x">On Mac OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_install.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_running.html">Running the software</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_running.html#on-development-machines">On development machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_running.html#unit-tests">Unit tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_running.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_topology.html">Topology files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_topology.html#topology-files-structure">Topology files structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_topology.html#defaults">Defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_topology.html#networks">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_topology.html#machines">Machines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_provisioning.html">    Provisioning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_provisioning.html#puppet">Puppet</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_hooks.html">Hooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">Main modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../candelabra.html">candelabra Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_plugins.html">Extending Candelabra with plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_plugins.html#deafult-plugins">Deafult plugins</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_license.html">Candelabra software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_license.html#third-party-packages">Third party packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../doc_license.html#bottle">Bottle</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"></ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <h1>Source code for candelabra.scheduler.rad_util</h1><div class="highlight"><pre>
<span class="c"># Copyright (c) 2007 RADLogic</span>
<span class="c"># </span>
<span class="c"># Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c"># of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c"># in the Software without restriction, including without limitation the rights</span>
<span class="c"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c"># copies of the Software, and to permit persons to whom the Software is</span>
<span class="c"># furnished to do so, subject to the following conditions:</span>
<span class="c"># </span>
<span class="c"># The above copyright notice and this permission notice shall be included in</span>
<span class="c"># all copies or substantial portions of the Software.</span>
<span class="c"># </span>
<span class="c"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span>
<span class="c"># THE SOFTWARE.</span>
<span class="sd">&quot;&quot;&quot;Provide various handy Python functions.</span>

<span class="sd">Running this script directly will execute the doctests.</span>

<span class="sd">Functions:</span>
<span class="sd">int2bin(i, n) -- Convert integer to binary string.</span>
<span class="sd">bin2int(bin_string) -- Convert binary string to integer.</span>
<span class="sd">reverse(input_string) -- Reverse a string.</span>
<span class="sd">transpose(matrix) -- Transpose a list of lists.</span>
<span class="sd">polygon_area(points_list) -- Calculate the area of an arbitrary polygon.</span>
<span class="sd">timestamp() -- Return string containing current time stamp.</span>
<span class="sd">pt2str(point) -- Return prettier string version of point tuple.</span>
<span class="sd">gcf(a, b) -- Return the greatest common factor of two numbers.</span>
<span class="sd">lcm(a, b) -- Return the least common multiple of two numbers.</span>
<span class="sd">permutations(input_list) -- Generate all permutations of a list of items.</span>
<span class="sd">reduce_fraction(fraction) -- Reduce fraction (num, denom) to simplest form.</span>
<span class="sd">quantile(l, p) -- Return p quantile of list l. E.g. p=0.25 for q1.</span>
<span class="sd">trim(l) -- Discard values in list more than 1.5*IQR outside IQR.</span>
<span class="sd">nice_units(value) -- Return value converted to human readable units.</span>
<span class="sd">uniquify(seq) -- Return sequence with duplicate items in sequence seq removed.</span>
<span class="sd">reverse_dict(d) -- Return the dictionary with the items as keys and vice-versa.</span>
<span class="sd">lsb(x, n) -- Return the n least significant bits of x.</span>
<span class="sd">gray_encode(i) -- Gray encode the given integer.</span>
<span class="sd">random_vec(bits, max_value=None) -- Return a random binary vector.</span>
<span class="sd">binary_range(bits) -- Return list of all possible binary numbers width=bits.</span>
<span class="sd">float_range([start], stop, [step]) -- Return range of floats.</span>
<span class="sd">find_common_fixes(s1, s2) -- Find common (prefix, suffix) of two strings.</span>
<span class="sd">is_rotated(seq1, seq2) -- Return true if the list is a rotation of other list.</span>
<span class="sd">getmodule(obj) -- Return the module that contains the object definition of obj.</span>
<span class="sd">                  (use inspect.getmodule instead, though)</span>
<span class="sd">get_args(argv) -- Store command-line args in a dictionary.</span>

<span class="sd">This module requires Python &gt;= 2.2</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s">&#39;Tim Wegener &lt;twegener@radlogic.com.au&gt;&#39;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s">&#39;$Date: 2007/03/27 03:15:06 $&#39;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s">&#39;$Revision: 0.45 $&#39;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">              David Chandler, for polygon area algorithm.</span>
<span class="s">               (http://www.davidchandler.com/AreaOfAGeneralPolygon.pdf)</span>
<span class="s">              &quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="k">try</span><span class="p">:</span>
    <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
    <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>


<div class="viewcode-block" id="int2bin"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.int2bin">[docs]</a><span class="k">def</span> <span class="nf">int2bin</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert decimal integer i to n-bit binary number (string).</span>

<span class="sd">    &gt;&gt;&gt; int2bin(0, 8)</span>
<span class="sd">    &#39;00000000&#39;</span>

<span class="sd">    &gt;&gt;&gt; int2bin(123, 8)</span>
<span class="sd">    &#39;01111011&#39;</span>

<span class="sd">    &gt;&gt;&gt; int2bin(123L, 8)</span>
<span class="sd">    &#39;01111011&#39;</span>

<span class="sd">    &gt;&gt;&gt; int2bin(15, 2)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ValueError: Value too large for given number of bits.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hex2bin</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;0&#39;</span><span class="p">:</span> <span class="s">&#39;0000&#39;</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">:</span> <span class="s">&#39;0001&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">:</span> <span class="s">&#39;0010&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">:</span> <span class="s">&#39;0011&#39;</span><span class="p">,</span>
               <span class="s">&#39;4&#39;</span><span class="p">:</span> <span class="s">&#39;0100&#39;</span><span class="p">,</span> <span class="s">&#39;5&#39;</span><span class="p">:</span> <span class="s">&#39;0101&#39;</span><span class="p">,</span> <span class="s">&#39;6&#39;</span><span class="p">:</span> <span class="s">&#39;0110&#39;</span><span class="p">,</span> <span class="s">&#39;7&#39;</span><span class="p">:</span> <span class="s">&#39;0111&#39;</span><span class="p">,</span>
               <span class="s">&#39;8&#39;</span><span class="p">:</span> <span class="s">&#39;1000&#39;</span><span class="p">,</span> <span class="s">&#39;9&#39;</span><span class="p">:</span> <span class="s">&#39;1001&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;1010&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;1011&#39;</span><span class="p">,</span>
               <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="s">&#39;1100&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">:</span> <span class="s">&#39;1101&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">:</span> <span class="s">&#39;1110&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;1111&#39;</span><span class="p">}</span>
    <span class="c"># Convert to hex then map each hex digit to binary equivalent.</span>
    <span class="n">result</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">hex2bin</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">hex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;l&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]])</span>
                      
    <span class="c"># Shrink result to appropriate length.</span>
    <span class="c"># Raise an error if the value is changed by the truncation.</span>
    <span class="k">if</span> <span class="s">&#39;1&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[:</span><span class="o">-</span><span class="n">n</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Value too large for given number of bits.&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="o">-</span><span class="n">n</span><span class="p">:]</span>
    <span class="c"># Zero-pad if length longer than mapped result.</span>
    <span class="n">result</span> <span class="o">=</span> <span class="s">&#39;0&#39;</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">))</span> <span class="o">+</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">result</span>

</div>
<div class="viewcode-block" id="bin2int"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.bin2int">[docs]</a><span class="k">def</span> <span class="nf">bin2int</span><span class="p">(</span><span class="n">bin_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert binary number string to decimal integer.</span>
<span class="sd">    </span>
<span class="sd">    Note: Python &gt; v2 has int(bin_string, 2)</span>

<span class="sd">    &gt;&gt;&gt; bin2int(&#39;1111&#39;)</span>
<span class="sd">    15</span>

<span class="sd">    &gt;&gt;&gt; bin2int(&#39;0101&#39;)</span>
<span class="sd">    5</span>

<span class="sd">    &quot;&quot;&quot;</span>
<span class="c">##     result = 0</span>
<span class="c">##     bin_list = list(bin_string)</span>
<span class="c">##     if len(filter(lambda x: x in (&#39;1&#39;,&#39;0&#39;), bin_list)) &lt; len(bin_list):</span>
<span class="c">##         raise Exception (&quot;bin2int: Error - not a binary number: %s&quot;</span>
<span class="c">##                          % bin_string)</span>
<span class="c">##     bit_list = map(int, bin_list)</span>
<span class="c">##     bit_list.reverse()  # Make most significant bit have highest index.</span>
<span class="c">##     for bit_place in range(len(bit_list)):</span>
<span class="c">##         result = result + ((2**bit_place) * bit_list[bit_place])</span>
<span class="c">##     return result</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">bin_string</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="reverse"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.reverse">[docs]</a><span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="n">input_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reverse a string. Useful for strings of binary numbers.</span>

<span class="sd">    &gt;&gt;&gt; reverse(&#39;abc&#39;)</span>
<span class="sd">    &#39;cba&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">str_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">input_string</span><span class="p">)</span>
    <span class="n">str_list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">str_list</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="transpose"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.transpose">[docs]</a><span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="n">matrix</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Transpose a list of lists.</span>

<span class="sd">    &gt;&gt;&gt; transpose([[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], [&#39;d&#39;, &#39;e&#39;, &#39;f&#39;], [&#39;g&#39;, &#39;h&#39;, &#39;i&#39;]])</span>
<span class="sd">    [[&#39;a&#39;, &#39;d&#39;, &#39;g&#39;], [&#39;b&#39;, &#39;e&#39;, &#39;h&#39;], [&#39;c&#39;, &#39;f&#39;, &#39;i&#39;]]</span>

<span class="sd">    &gt;&gt;&gt; transpose([[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], [&#39;d&#39;, &#39;e&#39;, &#39;f&#39;]])</span>
<span class="sd">    [[&#39;a&#39;, &#39;d&#39;], [&#39;b&#39;, &#39;e&#39;], [&#39;c&#39;, &#39;f&#39;]]</span>

<span class="sd">    &gt;&gt;&gt; transpose([[&#39;a&#39;, &#39;b&#39;], [&#39;d&#39;, &#39;e&#39;], [&#39;g&#39;, &#39;h&#39;]])</span>
<span class="sd">    [[&#39;a&#39;, &#39;d&#39;, &#39;g&#39;], [&#39;b&#39;, &#39;e&#39;, &#39;h&#39;]]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">matrix</span><span class="p">)</span>
    <span class="c"># Convert list of tuples to list of lists.</span>
    <span class="c"># map is faster than a list comprehension since it is being used with</span>
    <span class="c"># a built-in function as an argument.</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>

</div>
<div class="viewcode-block" id="polygon_area"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.polygon_area">[docs]</a><span class="k">def</span> <span class="nf">polygon_area</span><span class="p">(</span><span class="n">points_list</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculate area of an arbitrary polygon using an algorithm from the web.</span>

<span class="sd">    Return the area of the polygon as a positive float. </span>

<span class="sd">    Arguments:</span>
<span class="sd">    points_list -- list of point tuples [(x0, y0), (x1, y1), (x2, y2), ...]</span>
<span class="sd">                   (Unclosed polygons will be closed automatically.</span>
<span class="sd">    precision -- Internal arithmetic precision (integer arithmetic).</span>

<span class="sd">    &gt;&gt;&gt; polygon_area([(0, 0), (0, 1), (1, 1), (1, 2), (2, 2), (2, 0), (0, 0)])</span>
<span class="sd">    3.0</span>

<span class="sd">    Credits:</span>
<span class="sd">    Area of a General Polygon by David Chandler</span>
<span class="sd">    http://www.davidchandler.com/AreaOfAGeneralPolygon.pdf</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># Scale up co-ordinates and convert them to integers.</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points_list</span><span class="p">)):</span>
        <span class="n">points_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">points_list</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">precision</span><span class="p">),</span>
                          <span class="nb">int</span><span class="p">(</span><span class="n">points_list</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">precision</span><span class="p">))</span>
    <span class="c"># Close polygon if not closed.</span>
    <span class="k">if</span> <span class="n">points_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">points_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">points_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">points_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="c"># Calculate area.</span>
    <span class="n">area</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points_list</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="p">(</span><span class="n">x_i</span><span class="p">,</span> <span class="n">y_i</span><span class="p">)</span> <span class="o">=</span> <span class="n">points_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="p">(</span><span class="n">x_i_plus_1</span><span class="p">,</span> <span class="n">y_i_plus_1</span><span class="p">)</span> <span class="o">=</span> <span class="n">points_list</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">area</span> <span class="o">=</span> <span class="n">area</span> <span class="o">+</span> <span class="p">(</span><span class="n">x_i_plus_1</span> <span class="o">*</span> <span class="n">y_i</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">y_i_plus_1</span> <span class="o">*</span> <span class="n">x_i</span><span class="p">)</span>
    <span class="n">area</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">area</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="c"># Unscale area.</span>
    <span class="n">area</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">area</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">precision</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">area</span>

</div>
<div class="viewcode-block" id="timestamp"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.timestamp">[docs]</a><span class="k">def</span> <span class="nf">timestamp</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Return string containing current time stamp.</span>

<span class="sd">    Note: In Python 2 onwards can use time.asctime() with no arguments.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">asctime</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="pt2str"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.pt2str">[docs]</a><span class="k">def</span> <span class="nf">pt2str</span><span class="p">(</span><span class="n">point</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return prettier string version of point tuple.</span>

<span class="sd">    &gt;&gt;&gt; pt2str((1.8, 1.9))</span>
<span class="sd">    &#39;(1.8, 1.9)&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s">&quot;(</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">str</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

</div>
<div class="viewcode-block" id="gcf"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.gcf">[docs]</a><span class="k">def</span> <span class="nf">gcf</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=</span><span class="mf">1e-16</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the greatest common factor of a and b, using Euclidean algorithm.</span>

<span class="sd">    Arguments:</span>
<span class="sd">    a, b -- two numbers</span>
<span class="sd">            If both numbers are integers return an integer result, </span>
<span class="sd">            otherwise return a float result.</span>
<span class="sd">    epsilon -- floats less than this magnitude are considered to be zero</span>
<span class="sd">               (default: 1e-16)</span>

<span class="sd">    Examples:</span>

<span class="sd">    &gt;&gt;&gt; gcf(12, 34)</span>
<span class="sd">    2</span>

<span class="sd">    &gt;&gt;&gt; gcf(13.5, 4)</span>
<span class="sd">    0.5</span>

<span class="sd">    &gt;&gt;&gt; gcf(-2, 4)</span>
<span class="sd">    2</span>

<span class="sd">    &gt;&gt;&gt; gcf(5, 0)</span>
<span class="sd">    5</span>

<span class="sd">    By (a convenient) definition:</span>
<span class="sd">    &gt;&gt;&gt; gcf(0, 0)</span>
<span class="sd">    0</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">remainder</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">remainder</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">remainder</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">epsilon</span><span class="p">:</span>
        <span class="n">new_remainder</span> <span class="o">=</span> <span class="n">result</span> <span class="o">%</span> <span class="n">remainder</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">remainder</span>
        <span class="n">remainder</span> <span class="o">=</span> <span class="n">new_remainder</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="lcm"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.lcm">[docs]</a><span class="k">def</span> <span class="nf">lcm</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the least common multiple of a and b, using the gcf function.</span>

<span class="sd">    Arguments:</span>
<span class="sd">    a, b -- two numbers. If both are integers return an integer result, </span>
<span class="sd">            otherwise a return a float result.</span>
<span class="sd">    precision -- scaling factor if a and/or b are floats.</span>

<span class="sd">    &gt;&gt;&gt; lcm(21, 6)</span>
<span class="sd">    42</span>

<span class="sd">    &gt;&gt;&gt; lcm(2.5, 3.5)</span>
<span class="sd">    17.5</span>

<span class="sd">    &gt;&gt;&gt; str(lcm(1.5e-8, 2.5e-8, precision=1e9))</span>
<span class="sd">    &#39;7.5e-08&#39;</span>

<span class="sd">    By (an arbitary) definition:</span>
<span class="sd">    &gt;&gt;&gt; lcm(0, 0)</span>
<span class="sd">    0</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># Note: Dummy precision argument is for backwards compatibility.</span>
    <span class="c"># Do the division first.</span>
    <span class="c"># (See http://en.wikipedia.org/wiki/Least_common_multiple )</span>
    <span class="n">denom</span> <span class="o">=</span> <span class="n">gcf</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">denom</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span> <span class="o">/</span> <span class="n">denom</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>

</div>
<div class="viewcode-block" id="permutations"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.permutations">[docs]</a><span class="k">def</span> <span class="nf">permutations</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a list containing all permutations of the input list.</span>

<span class="sd">    Note: This is a recursive function.</span>

<span class="sd">    &gt;&gt;&gt; perms = permutations([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])</span>
<span class="sd">    &gt;&gt;&gt; perms.sort()</span>
<span class="sd">    &gt;&gt;&gt; for perm in perms:</span>
<span class="sd">    ...     print perm</span>
<span class="sd">    [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>
<span class="sd">    [&#39;a&#39;, &#39;c&#39;, &#39;b&#39;]</span>
<span class="sd">    [&#39;b&#39;, &#39;a&#39;, &#39;c&#39;]</span>
<span class="sd">    [&#39;b&#39;, &#39;c&#39;, &#39;a&#39;]</span>
<span class="sd">    [&#39;c&#39;, &#39;a&#39;, &#39;b&#39;]</span>
<span class="sd">    [&#39;c&#39;, &#39;b&#39;, &#39;a&#39;]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">out_lists</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c"># Extract first item in list.</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">input_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c"># Find all permutations of remainder of list. (Recursive call.)</span>
        <span class="n">sub_lists</span> <span class="o">=</span> <span class="n">permutations</span><span class="p">(</span><span class="n">input_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="c"># For every permutation of the sub list...</span>
        <span class="k">for</span> <span class="n">sub_list</span> <span class="ow">in</span> <span class="n">sub_lists</span><span class="p">:</span>
            <span class="c"># Insert the extracted first item at every position of the list.</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">input_list</span><span class="p">)):</span>
                <span class="n">new_list</span> <span class="o">=</span> <span class="n">sub_list</span><span class="p">[:]</span>
                <span class="n">new_list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
                <span class="n">out_lists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_list</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># Termination condition: only one item in input list.</span>
        <span class="n">out_lists</span> <span class="o">=</span> <span class="p">[</span><span class="n">input_list</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">out_lists</span>

</div>
<div class="viewcode-block" id="reduce_fraction"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.reduce_fraction">[docs]</a><span class="k">def</span> <span class="nf">reduce_fraction</span><span class="p">(</span><span class="n">fraction</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reduce fraction tuple to simplest form. fraction=(num, denom)</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; reduce_fraction((14, 7))</span>
<span class="sd">    (2, 1)</span>

<span class="sd">    &gt;&gt;&gt; reduce_fraction((-2, 4))</span>
<span class="sd">    (-1, 2)</span>

<span class="sd">    &gt;&gt;&gt; reduce_fraction((0, 4))</span>
<span class="sd">    (0, 1)</span>

<span class="sd">    &gt;&gt;&gt; reduce_fraction((4, 0))</span>
<span class="sd">    (1, 0)</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span> <span class="o">=</span> <span class="n">fraction</span>
    <span class="n">common_factor</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">gcf</span><span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">))</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">numerator</span><span class="o">/</span><span class="n">common_factor</span><span class="p">,</span> <span class="n">denominator</span><span class="o">/</span><span class="n">common_factor</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>

</div>
<div class="viewcode-block" id="quantile"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.quantile">[docs]</a><span class="k">def</span> <span class="nf">quantile</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return p quantile of list l. E.g. p=0.25 for q1.</span>

<span class="sd">    See:</span>
<span class="sd">    http://rweb.stat.umn.edu/R/library/base/html/quantile.html</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">l_sort</span> <span class="o">=</span> <span class="n">l</span><span class="p">[:]</span>
    <span class="n">l_sort</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">((</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">r</span> <span class="o">-</span> <span class="n">i</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span>  <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">f</span><span class="p">)</span><span class="o">*</span><span class="n">l_sort</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="o">*</span><span class="n">l_sort</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">l_sort</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">result</span>

</div>
<div class="viewcode-block" id="trim"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.trim">[docs]</a><span class="k">def</span> <span class="nf">trim</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Discard values in list more than 1.5*IQR outside IQR.</span>

<span class="sd">    (IQR is inter-quartile-range)</span>

<span class="sd">    This function uses rad_util.quantile</span>

<span class="sd">    1.5*IQR -- mild outlier</span>
<span class="sd">    3*IQR -- extreme outlier</span>

<span class="sd">    See:</span>
<span class="sd">    http://wind.cc.whecn.edu/~pwildman/statnew/section_7_-_exploratory_data_analysis.htm</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">l_sort</span> <span class="o">=</span> <span class="n">l</span><span class="p">[:]</span>
    <span class="n">l_sort</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="c"># Calculate medianscore  (based on stats.py lmedianscore by Gary Strangman)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">l_sort</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c"># If even number of scores, average middle 2.</span>
        <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">l_sort</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c"># Integer division correct</span>
        <span class="n">median</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">l_sort</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+</span> <span class="n">l_sort</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># int divsion gives mid value when count from 0</span>
        <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">l_sort</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">median</span> <span class="o">=</span> <span class="n">l_sort</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
    <span class="c"># Calculate IQR.</span>
    <span class="n">q1</span> <span class="o">=</span> <span class="n">quantile</span><span class="p">(</span><span class="n">l_sort</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
    <span class="n">q3</span> <span class="o">=</span> <span class="n">quantile</span><span class="p">(</span><span class="n">l_sort</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">)</span>
    <span class="n">iqr</span> <span class="o">=</span> <span class="n">q3</span> <span class="o">-</span> <span class="n">q1</span>
    <span class="n">iqr_extra</span> <span class="o">=</span> <span class="n">iqr</span> <span class="o">*</span> <span class="mf">1.5</span>
    <span class="k">def</span> <span class="nf">in_interval</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="n">iqr_extra</span><span class="p">,</span> <span class="n">q1</span><span class="o">=</span><span class="n">q1</span><span class="p">,</span> <span class="n">q3</span><span class="o">=</span><span class="n">q3</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">q1</span><span class="o">-</span><span class="n">i</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">q3</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
    <span class="n">l_trimmed</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l_sort</span> <span class="k">if</span> <span class="n">in_interval</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">l_trimmed</span>

</div>
<div class="viewcode-block" id="nice_units"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.nice_units">[docs]</a><span class="k">def</span> <span class="nf">nice_units</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dp</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sigfigs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">space</span><span class="o">=</span><span class="s">&#39; &#39;</span><span class="p">,</span>
               <span class="n">use_extra_prefixes</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">use_full_name</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;si&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return value converted to human readable units eg milli, micro, etc.</span>

<span class="sd">    Arguments:</span>
<span class="sd">    value -- number in base units</span>
<span class="sd">    dp -- number of decimal places to display (rounded)</span>
<span class="sd">    sigfigs -- number of significant figures to display (rounded)</span>
<span class="sd">               This overrides dp if set.</span>
<span class="sd">    suffix -- optional unit suffix to append to unit multiplier</span>
<span class="sd">    space -- seperator between value and unit multiplier (default: &#39; &#39;)</span>
<span class="sd">    use_extra_prefixes -- use hecto, deka, deci and centi as well if set.</span>
<span class="sd">                          (default: False)</span>
<span class="sd">    use_full_name -- use full name for multiplier symbol,</span>
<span class="sd">                     e.g. milli instead of m</span>
<span class="sd">                     (default: False)</span>
<span class="sd">    mode -- &#39;si&#39; for SI prefixes, &#39;bin&#39; for binary multipliers (1024, etc.)</span>
<span class="sd">            (Default: &#39;si&#39;)</span>

<span class="sd">    SI prefixes from:</span>
<span class="sd">    http://physics.nist.gov/cuu/Units/prefixes.html</span>
<span class="sd">    (Greek mu changed to u.)</span>
<span class="sd">    Binary prefixes based on:</span>
<span class="sd">    http://physics.nist.gov/cuu/Units/binary.html</span>

<span class="sd">    &gt;&gt;&gt; nice_units(2e-11)</span>
<span class="sd">    &#39;20 p&#39;</span>

<span class="sd">    &gt;&gt;&gt; nice_units(2e-11, space=&#39;&#39;)</span>
<span class="sd">    &#39;20p&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">si_prefixes</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1e24</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;Y&#39;</span><span class="p">,</span> <span class="s">&#39;yotta&#39;</span><span class="p">),</span>
                   <span class="mf">1e21</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;Z&#39;</span><span class="p">,</span> <span class="s">&#39;zetta&#39;</span><span class="p">),</span>
                   <span class="mf">1e18</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;exa&#39;</span><span class="p">),</span>
                   <span class="mf">1e15</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;peta&#39;</span><span class="p">),</span>
                   <span class="mf">1e12</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="s">&#39;tera&#39;</span><span class="p">),</span>
                   <span class="mf">1e9</span><span class="p">:</span>   <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;giga&#39;</span><span class="p">),</span>
                   <span class="mf">1e6</span><span class="p">:</span>   <span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;mega&#39;</span><span class="p">),</span>
                   <span class="mf">1e3</span><span class="p">:</span>   <span class="p">(</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="s">&#39;kilo&#39;</span><span class="p">),</span>
                   <span class="mf">1e-3</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;milli&#39;</span><span class="p">),</span>
                   <span class="mf">1e-6</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;u&#39;</span><span class="p">,</span> <span class="s">&#39;micro&#39;</span><span class="p">),</span>
                   <span class="mf">1e-9</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;n&#39;</span><span class="p">,</span> <span class="s">&#39;nano&#39;</span><span class="p">),</span>
                   <span class="mf">1e-12</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;p&#39;</span><span class="p">,</span> <span class="s">&#39;pico&#39;</span><span class="p">),</span>
                   <span class="mf">1e-15</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;femto&#39;</span><span class="p">),</span>
                   <span class="mf">1e-18</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;atto&#39;</span><span class="p">),</span>
                   <span class="mf">1e-21</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="s">&#39;zepto&#39;</span><span class="p">),</span>
                   <span class="mf">1e-24</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;yocto&#39;</span><span class="p">)</span>
                   <span class="p">}</span>
    <span class="k">if</span> <span class="n">use_extra_prefixes</span><span class="p">:</span>
        <span class="n">si_prefixes</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="mf">1e2</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="s">&#39;hecto&#39;</span><span class="p">),</span>
                            <span class="mf">1e1</span><span class="p">:</span>  <span class="p">(</span><span class="s">&#39;da&#39;</span><span class="p">,</span> <span class="s">&#39;deka&#39;</span><span class="p">),</span>
                            <span class="mf">1e-1</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;deci&#39;</span><span class="p">),</span>
                            <span class="mf">1e-2</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;centi&#39;</span><span class="p">)</span>
                            <span class="p">})</span>
    <span class="n">bin_prefixes</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="o">**</span><span class="mi">10</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;K&#39;</span><span class="p">,</span> <span class="s">&#39;kilo&#39;</span><span class="p">),</span>
                    <span class="mi">2</span><span class="o">**</span><span class="mi">20</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;mega&#39;</span><span class="p">),</span>
                    <span class="mi">2</span><span class="o">**</span><span class="mi">30</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;mega&#39;</span><span class="p">),</span>
                    <span class="mi">2</span><span class="o">**</span><span class="mi">40</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="s">&#39;tera&#39;</span><span class="p">),</span>
                    <span class="mi">2</span><span class="o">**</span><span class="mi">50</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;peta&#39;</span><span class="p">),</span>
                    <span class="mi">2</span><span class="o">**</span><span class="mi">60</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;exa&#39;</span><span class="p">)</span>
                    <span class="p">}</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s">&#39;bin&#39;</span><span class="p">:</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="n">bin_prefixes</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="n">si_prefixes</span>
    <span class="n">prefixes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>  <span class="c"># Unity.</span>
    <span class="c"># Determine appropriate multiplier.</span>
    <span class="n">multipliers</span> <span class="o">=</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">multipliers</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="n">mult</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">multipliers</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">lower_mult</span> <span class="o">=</span> <span class="n">multipliers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">upper_mult</span> <span class="o">=</span> <span class="n">multipliers</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lower_mult</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="n">upper_mult</span><span class="p">:</span>
            <span class="n">mult_i</span> <span class="o">=</span> <span class="n">i</span>
            <span class="k">break</span>
    <span class="k">if</span> <span class="n">mult</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="n">multipliers</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">mult_i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="n">multipliers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">mult_i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">multipliers</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">mult</span> <span class="o">=</span> <span class="n">multipliers</span><span class="p">[</span><span class="n">mult_i</span><span class="p">]</span>
    <span class="c"># Convert value for this multiplier.</span>
    <span class="n">new_value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="n">mult</span>
    <span class="c"># Deal with special case due to rounding.</span>
    <span class="k">if</span> <span class="n">sigfigs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">mult_i</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">multipliers</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> \
               <span class="nb">round</span><span class="p">(</span><span class="n">new_value</span><span class="p">,</span> <span class="n">dp</span><span class="p">)</span> <span class="o">==</span> \
               <span class="nb">round</span><span class="p">((</span><span class="n">multipliers</span><span class="p">[</span><span class="n">mult_i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">mult</span><span class="p">),</span> <span class="n">dp</span><span class="p">):</span>
            <span class="n">mult</span> <span class="o">=</span> <span class="n">multipliers</span><span class="p">[</span><span class="n">mult_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">new_value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="n">mult</span>
    <span class="c"># Concatenate multiplier symbol.</span>
    <span class="k">if</span> <span class="n">use_full_name</span><span class="p">:</span>
        <span class="n">label_type</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">label_type</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c"># Round and truncate to appropriate precision.</span>
    <span class="k">if</span> <span class="n">sigfigs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">str_value</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s">&#39;&quot;%.&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;f&quot; % new_value&#39;</span><span class="p">,</span> <span class="nb">locals</span><span class="p">(),</span> <span class="p">{})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">str_value</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s">&#39;&quot;%.&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">sigfigs</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;g&quot; % new_value&#39;</span><span class="p">,</span> <span class="nb">locals</span><span class="p">(),</span> <span class="p">{})</span>
    <span class="k">return</span> <span class="n">str_value</span> <span class="o">+</span> <span class="n">space</span> <span class="o">+</span> <span class="n">prefixes</span><span class="p">[</span><span class="n">mult</span><span class="p">][</span><span class="n">label_type</span><span class="p">]</span> <span class="o">+</span> <span class="n">suffix</span>

</div>
<div class="viewcode-block" id="uniquify"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.uniquify">[docs]</a><span class="k">def</span> <span class="nf">uniquify</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">preserve_order</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return sequence with duplicate items in sequence seq removed.</span>

<span class="sd">    The code is based on usenet post by Tim Peters.</span>

<span class="sd">    This code is O(N) if the sequence items are hashable, O(N**2) if not.</span>
<span class="sd">    </span>
<span class="sd">    Peter Bengtsson has a blog post with an empirical comparison of other</span>
<span class="sd">    approaches:</span>
<span class="sd">    http://www.peterbe.com/plog/uniqifiers-benchmark</span>

<span class="sd">    If order is not important and the sequence items are hashable then</span>
<span class="sd">    list(set(seq)) is readable and efficient.</span>

<span class="sd">    If order is important and the sequence items are hashable generator</span>
<span class="sd">    expressions can be used (in py &gt;= 2.4) (useful for large sequences):</span>
<span class="sd">    seen = set()</span>
<span class="sd">    do_something(x for x in seq if x not in seen or seen.add(x))</span>

<span class="sd">    Arguments:</span>
<span class="sd">    seq -- sequence</span>
<span class="sd">    preserve_order -- if not set the order will be arbitrary</span>
<span class="sd">                      Using this option will incur a speed penalty.</span>
<span class="sd">                      (default: False)</span>

<span class="sd">    Example showing order preservation:</span>

<span class="sd">    &gt;&gt;&gt; uniquify([&#39;a&#39;, &#39;aa&#39;, &#39;b&#39;, &#39;b&#39;, &#39;ccc&#39;, &#39;ccc&#39;, &#39;d&#39;], preserve_order=True)</span>
<span class="sd">    [&#39;a&#39;, &#39;aa&#39;, &#39;b&#39;, &#39;ccc&#39;, &#39;d&#39;]</span>

<span class="sd">    Example using a sequence of un-hashable items:</span>

<span class="sd">    &gt;&gt;&gt; uniquify([[&#39;z&#39;], [&#39;x&#39;], [&#39;y&#39;], [&#39;z&#39;]], preserve_order=True)</span>
<span class="sd">    [[&#39;z&#39;], [&#39;x&#39;], [&#39;y&#39;]]</span>

<span class="sd">    The sorted output or the non-order-preserving approach should equal</span>
<span class="sd">    that of the sorted order-preserving approach output:</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; unordered = uniquify([3, 3, 1, 2], preserve_order=False)</span>
<span class="sd">    &gt;&gt;&gt; unordered.sort()</span>
<span class="sd">    &gt;&gt;&gt; ordered = uniquify([3, 3, 1, 2], preserve_order=True)</span>
<span class="sd">    &gt;&gt;&gt; ordered.sort()</span>
<span class="sd">    &gt;&gt;&gt; ordered</span>
<span class="sd">    [1, 2, 3]</span>
<span class="sd">    &gt;&gt;&gt; int(ordered == unordered)</span>
<span class="sd">    1</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c"># Attempt fast algorithm.</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">preserve_order</span><span class="p">:</span>
            <span class="c"># This is based on Dave Kirby&#39;s method (f8) noted in the post:</span>
            <span class="c"># http://www.peterbe.com/plog/uniqifiers-benchmark</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">seq</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">d</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">d</span><span class="o">.</span><span class="n">__setitem__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">return</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="c"># Have an unhashable object, so use slow algorithm.</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">append</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">app</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

<span class="c"># Alias to noun form for backward compatibility.</span></div>
<span class="n">unique</span> <span class="o">=</span> <span class="n">uniquify</span>


<div class="viewcode-block" id="reverse_dict"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.reverse_dict">[docs]</a><span class="k">def</span> <span class="nf">reverse_dict</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reverse a dictionary so the items become the keys and vice-versa.</span>

<span class="sd">    Note: The results will be arbitrary if the items are not unique.</span>

<span class="sd">    &gt;&gt;&gt; d = reverse_dict({&#39;a&#39;: 1, &#39;b&#39;: 2})</span>
<span class="sd">    &gt;&gt;&gt; d_items = d.items()</span>
<span class="sd">    &gt;&gt;&gt; d_items.sort()</span>
<span class="sd">    &gt;&gt;&gt; d_items</span>
<span class="sd">    [(1, &#39;a&#39;), (2, &#39;b&#39;)]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">result</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
    <span class="k">return</span> <span class="n">result</span>

    </div>
<div class="viewcode-block" id="lsb"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.lsb">[docs]</a><span class="k">def</span> <span class="nf">lsb</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the n least significant bits of x.</span>

<span class="sd">    &gt;&gt;&gt; lsb(13, 3)</span>
<span class="sd">    5</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&amp;</span> <span class="p">((</span><span class="mi">2</span> <span class="o">**</span> <span class="n">n</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="gray_encode"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.gray_encode">[docs]</a><span class="k">def</span> <span class="nf">gray_encode</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gray encode the given integer.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">i</span> <span class="o">^</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="random_vec"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.random_vec">[docs]</a><span class="k">def</span> <span class="nf">random_vec</span><span class="p">(</span><span class="n">bits</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate a random binary vector of length bits and given max value.&quot;&quot;&quot;</span>

    <span class="n">vector</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bits</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="mi">2</span><span class="o">**</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
        <span class="n">vector</span> <span class="o">+=</span> <span class="n">int2bin</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">max_value</span> <span class="ow">and</span> <span class="p">(</span><span class="n">max_value</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">**</span> <span class="n">bits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">vector</span> <span class="o">=</span> <span class="n">int2bin</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="n">bits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="n">max_value</span><span class="p">,</span> <span class="n">bits</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">bits</span><span class="p">]</span>

</div>
<div class="viewcode-block" id="binary_range"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.binary_range">[docs]</a><span class="k">def</span> <span class="nf">binary_range</span><span class="p">(</span><span class="n">bits</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a list of all possible binary numbers in order with width=bits. </span>
<span class="sd">    </span>
<span class="sd">    It would be nice to extend it to match the</span>
<span class="sd">    functionality of python&#39;s range() built-in function.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;0&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">bits</span>

    <span class="n">toggle</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">bits</span>
    
    <span class="k">while</span> <span class="n">toggle</span><span class="p">[</span><span class="n">bits</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">v_copy</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:]</span>
        <span class="n">v_copy</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">v_copy</span><span class="p">))</span>
        
        <span class="n">toggle</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">bits</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">bits</span> <span class="ow">and</span> <span class="n">toggle</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">toggle</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;0&#39;</span><span class="p">:</span>
                    <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;1&#39;</span>
                    <span class="n">toggle</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;0&#39;</span>
                    <span class="n">toggle</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">l</span>

</div>
<div class="viewcode-block" id="float_range"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.float_range">[docs]</a><span class="k">def</span> <span class="nf">float_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a list containing an arithmetic progression of floats.</span>

<span class="sd">    Return a list of floats between 0.0 (or start) and stop with an</span>
<span class="sd">    increment of step. </span>

<span class="sd">    This is in functionality to python&#39;s range() built-in function </span>
<span class="sd">    but can accept float increments.</span>

<span class="sd">    As with range(), stop is omitted from the list.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">stop</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">stop</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">step</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="n">cur</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">cur</span> <span class="o">&lt;</span> <span class="n">stop</span><span class="p">:</span>
        <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cur</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">+=</span> <span class="n">step</span>

    <span class="k">return</span> <span class="n">l</span>

</div>
<div class="viewcode-block" id="find_common_fixes"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.find_common_fixes">[docs]</a><span class="k">def</span> <span class="nf">find_common_fixes</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find common (prefix, suffix) of two strings.</span>

<span class="sd">    &gt;&gt;&gt; find_common_fixes(&#39;abc&#39;, &#39;def&#39;)</span>
<span class="sd">    (&#39;&#39;, &#39;&#39;)</span>

<span class="sd">    &gt;&gt;&gt; find_common_fixes(&#39;abcelephantdef&#39;, &#39;abccowdef&#39;)</span>
<span class="sd">    (&#39;abc&#39;, &#39;def&#39;)</span>

<span class="sd">    &gt;&gt;&gt; find_common_fixes(&#39;abcelephantdef&#39;, &#39;abccow&#39;)</span>
<span class="sd">    (&#39;abc&#39;, &#39;&#39;)</span>

<span class="sd">    &gt;&gt;&gt; find_common_fixes(&#39;elephantdef&#39;, &#39;abccowdef&#39;)</span>
<span class="sd">    (&#39;&#39;, &#39;def&#39;)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">suffix</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">common_len</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s1</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">s2</span><span class="p">))</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">common_len</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">s2</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="k">break</span>

        <span class="n">prefix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">common_len</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">s1</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">s2</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]:</span>
            <span class="k">break</span>
        
        <span class="n">suffix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">])</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">suffix</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

    <span class="n">prefix</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
    <span class="n">suffix</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="is_rotated"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.is_rotated">[docs]</a><span class="k">def</span> <span class="nf">is_rotated</span><span class="p">(</span><span class="n">seq1</span><span class="p">,</span> <span class="n">seq2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return true if the first sequence is a rotation of the second sequence.</span>

<span class="sd">    &gt;&gt;&gt; seq1 = [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;]</span>
<span class="sd">    &gt;&gt;&gt; seq2 = [&#39;C&#39;, &#39;D&#39;, &#39;A&#39;, &#39;B&#39;]</span>
<span class="sd">    &gt;&gt;&gt; int(is_rotated(seq1, seq2))</span>
<span class="sd">    1</span>

<span class="sd">    &gt;&gt;&gt; seq2 = [&#39;C&#39;, &#39;D&#39;, &#39;B&#39;, &#39;A&#39;]</span>
<span class="sd">    &gt;&gt;&gt; int(is_rotated(seq1, seq2))</span>
<span class="sd">    0</span>

<span class="sd">    &gt;&gt;&gt; seq1 = [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;A&#39;]</span>
<span class="sd">    &gt;&gt;&gt; seq2 = [&#39;A&#39;, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;]</span>
<span class="sd">    &gt;&gt;&gt; int(is_rotated(seq1, seq2))</span>
<span class="sd">    1</span>

<span class="sd">    &gt;&gt;&gt; seq2 = [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;A&#39;]</span>
<span class="sd">    &gt;&gt;&gt; int(is_rotated(seq1, seq2))</span>
<span class="sd">    1</span>

<span class="sd">    &gt;&gt;&gt; seq2 = [&#39;A&#39;, &#39;A&#39;, &#39;C&#39;, &#39;B&#39;]</span>
<span class="sd">    &gt;&gt;&gt; int(is_rotated(seq1, seq2))</span>
<span class="sd">    0</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># Do a sanity check.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">seq1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">seq2</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="c"># Look for occurrences of second sequence head item in first sequence.</span>
    <span class="n">start_indexes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">head_item</span> <span class="o">=</span> <span class="n">seq2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">index1</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">seq1</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">seq1</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span> <span class="o">==</span> <span class="n">head_item</span><span class="p">:</span>
            <span class="n">start_indexes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index1</span><span class="p">)</span>
    <span class="c"># Check that wrapped sequence matches.</span>
    <span class="n">double_seq1</span> <span class="o">=</span> <span class="n">seq1</span> <span class="o">+</span> <span class="n">seq1</span>
    <span class="k">for</span> <span class="n">index1</span> <span class="ow">in</span> <span class="n">start_indexes</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">double_seq1</span><span class="p">[</span><span class="n">index1</span><span class="p">:</span><span class="n">index1</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">seq1</span><span class="p">)]</span> <span class="o">==</span> <span class="n">seq2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="getmodule"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.getmodule">[docs]</a><span class="k">def</span> <span class="nf">getmodule</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the module that contains the object definition of obj.</span>

<span class="sd">    Note: Use inspect.getmodule instead.</span>

<span class="sd">    Arguments:</span>
<span class="sd">    obj -- python obj, generally a class or a function</span>

<span class="sd">    Examples:</span>
<span class="sd">    </span>
<span class="sd">    A function:</span>
<span class="sd">    &gt;&gt;&gt; module = getmodule(random.choice)</span>
<span class="sd">    &gt;&gt;&gt; module.__name__</span>
<span class="sd">    &#39;random&#39;</span>
<span class="sd">    &gt;&gt;&gt; module is random</span>
<span class="sd">    1</span>

<span class="sd">    A class:</span>
<span class="sd">    &gt;&gt;&gt; module = getmodule(random.Random)</span>
<span class="sd">    &gt;&gt;&gt; module.__name__</span>
<span class="sd">    &#39;random&#39;</span>
<span class="sd">    &gt;&gt;&gt; module is random</span>
<span class="sd">    1</span>

<span class="sd">    A class inheriting from a class in another module:</span>
<span class="sd">    (note: The inheriting class must define at least one function.)</span>
<span class="sd">    &gt;&gt;&gt; class MyRandom(random.Random):</span>
<span class="sd">    ...     def play(self):</span>
<span class="sd">    ...         pass</span>
<span class="sd">    &gt;&gt;&gt; module = getmodule(MyRandom)</span>
<span class="sd">    &gt;&gt;&gt; if __name__ == &#39;__main__&#39;:</span>
<span class="sd">    ...     name = &#39;rad_util&#39;</span>
<span class="sd">    ... else:</span>
<span class="sd">    ...     name = module.__name__</span>
<span class="sd">    &gt;&gt;&gt; name</span>
<span class="sd">    &#39;rad_util&#39;</span>
<span class="sd">    &gt;&gt;&gt; module is sys.modules[__name__]</span>
<span class="sd">    1</span>

<span class="sd">    Discussion:</span>
<span class="sd">    This approach is slightly hackish, and won&#39;t work in various situations.</span>
<span class="sd">    However, this was the approach recommended by GvR, so it&#39;s as good as</span>
<span class="sd">    you&#39;ll get.</span>

<span class="sd">    See GvR&#39;s post in this thread:</span>
<span class="sd">    http://groups.google.com.au/group/comp.lang.python/browse_thread/thread/966a7bdee07e3b34/c3cab3f41ea84236?lnk=st&amp;q=python+determine+class+module&amp;rnum=4&amp;hl=en#c3cab3f41ea84236</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">&#39;func_globals&#39;</span><span class="p">):</span>
        <span class="n">func</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># Handle classes.</span>
        <span class="n">func</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s">&#39;func_globals&#39;</span><span class="p">):</span>
                <span class="n">func</span> <span class="o">=</span> <span class="n">item</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;No functions attached to object: </span><span class="si">%r</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">obj</span><span class="p">)</span>
    <span class="n">module_name</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">func_globals</span><span class="p">[</span><span class="s">&#39;__name__&#39;</span><span class="p">]</span>
    <span class="c"># Get module.</span>
    <span class="n">module</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">module_name</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">module</span>

</div>
<div class="viewcode-block" id="round_grid"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.round_grid">[docs]</a><span class="k">def</span> <span class="nf">round_grid</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Round off the given value to the given grid size.</span>

<span class="sd">    Arguments:</span>
<span class="sd">    value -- value to be roudne</span>
<span class="sd">    grid -- result must be a multiple of this</span>
<span class="sd">    mode -- 0 nearest, 1 up, -1 down</span>

<span class="sd">    Examples:</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; round_grid(7.5, 5)</span>
<span class="sd">    10</span>

<span class="sd">    &gt;&gt;&gt; round_grid(7.5, 5, mode=-1)</span>
<span class="sd">    5</span>

<span class="sd">    &gt;&gt;&gt; round_grid(7.3, 5, mode=1)</span>
<span class="sd">    10</span>

<span class="sd">    &gt;&gt;&gt; round_grid(7.3, 5.0, mode=1)</span>
<span class="sd">    10.0</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">off_grid</span> <span class="o">=</span> <span class="n">value</span> <span class="o">%</span> <span class="n">grid</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">add_one</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">off_grid</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">grid</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">off_grid</span><span class="p">:</span>
        <span class="n">add_one</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">off_grid</span><span class="p">:</span>
        <span class="n">add_one</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span> <span class="o">/</span> <span class="n">grid</span><span class="p">)</span> <span class="o">+</span> <span class="n">add_one</span><span class="p">)</span> <span class="o">*</span> <span class="n">grid</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>

</div>
<div class="viewcode-block" id="get_args"><a class="viewcode-back" href="../../../candelabra.scheduler.html#candelabra.scheduler.rad_util.get_args">[docs]</a><span class="k">def</span> <span class="nf">get_args</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Store command-line args in a dictionary.</span>
<span class="sd">    </span>
<span class="sd">    -, -- prefixes are removed</span>
<span class="sd">    Items not prefixed with - or -- are stored as a list, indexed by &#39;args&#39;</span>

<span class="sd">    For options that take a value use --option=value</span>

<span class="sd">    Consider using optparse or getopt (in Python standard library) instead.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">argv</span><span class="p">:</span>
            
        <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;^-+&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;=&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="n">d</span><span class="p">[</span><span class="s">&#39;args&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span>
    
    <span class="k">return</span> <span class="n">d</span>

</div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s">&#39;__main__&#39;</span><span class="p">])</span>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright Alvaro Saurin.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>